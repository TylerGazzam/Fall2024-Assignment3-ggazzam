@{
    ViewData["Title"] = "Actor Reviews";
}
<div class="ActorName">
    <h1>Actor Reviews</h1>
</div>
<div class="containerActor">
    <select id="actorDropdown" name="actorDropdown">
        <option value="">Select an Actor</option>
    </select>
    <div id="actorDetails" style="margin-top: 20px;">
        <p><strong>IMDB Link:</strong> <span id="imdbLink"></span></p>
        <p><strong>Gender:</strong> <span id="gender"></span></p>
        <p><strong>Age:</strong> <span id="age"></span></p>
    </div>
    <button id="seeTweetsButton" style="display: none; margin-top: 20px;">See Tweets</button>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        fetch('/Actors/GetActorNames')
            .then(response => response.json())
            .then(data => {
                const dropdown = document.getElementById('actorDropdown');
                data.forEach(name => {
                    const option = document.createElement('option');
                    option.value = name;
                    option.text = name;
                    dropdown.appendChild(option);
                });
            })
            .catch(error => console.error('Error fetching actor names:', error));

        document.getElementById('actorDropdown').addEventListener('change', function () {
            const selectedName = this.value;
            if (selectedName) {
                fetch(`/Actors/GetActorDetails?name=${encodeURIComponent(selectedName)}`)
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('imdbLink').innerHTML = `<a href="${data.IMDBLink}" target="_blank">${data.IMDBLink}</a>`;
                        document.getElementById('gender').textContent = data.Gender;
                        document.getElementById('age').textContent = data.Age;
                        document.getElementById('seeTweetsButton').style.display = 'block'; 
                    })
                    .catch(error => console.error('Error fetching actor details:', error));
            } else {
                document.getElementById('imdbLink').textContent = '';
                document.getElementById('gender').textContent = '';
                document.getElementById('age').textContent = '';
                document.getElementById('seeTweetsButton').style.display = 'none'; 
            }
        });
    });
</script>
